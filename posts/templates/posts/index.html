{% extends 'base.html' %}

{% block title %}
{% if category %}
Posts da categoria: {{ category.name }}
{% else %}
Todos os Posts
{% endif %}
{% endblock title %}

{% block content %}

{% if category %}
  <h2>Posts da categoria: {{ category.name }}</h2>

  {% if category.text %}
    <p>{{ category.text }}</p>
  {% endif %}
{% else %}
  <h2>Todos os Posts</h2>
{% endif %}

<section>
  {% if not category %}
  <p>
    Muitos resultados? <a href="{% url 'posts:search' %}">Buscar Posts</a>
  </p>
  <p>
    Deseja fazer um post?
    <a href="{% url 'posts:create' %}">Adicionar novo post</a>
  </p>
  {% endif %}
</section>

{% if posts %}
<section class="lista-de-cards">
  {% for post in posts %}
  <article class="card">
    <a href="{% url 'posts:detail' post.id %}">
      <img src="{{ post.imagem_url }}" alt="Imagem do post {{ post.titulo }}" />
    </a>
    <h3>{{ post.titulo }}</h3>
    <p>{{ post.data_postagem|date:"d/m/Y H:i" }}</p>

    {% if post.category_set.all %}
    <p>Categorias:
      {% for cat in post.category_set.all %}
        <a href="{% url 'posts:category_detail' cat.id %}">{{ cat.name }}</a>{% if not forloop.last %}, {% endif %}
      {% endfor %}
    </p>
    {% endif %}
  </article>
  {% endfor %}
</section>
{% else %}
<p>NÃ£o foi encontrado nenhum post.</p>
{% endif %}

{% endblock content %}
